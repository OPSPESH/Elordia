-- combat 
-- combat.script
local characters = require("characters")

function init(self)
    msg.post(".", "acquire_input_focus")
    self.turn = 1
    self.current_hero = 1
    self.current_enemy = 1
    self.state = "hero_turn"  -- "hero_turn" or "enemy_turn"
end

function on_input(self, action_id, action)
    if action_id == hash("attack") and action.released then
        if self.state == "hero_turn" then
            attack(self, characters.heroes[self.current_hero], characters.enemies[self.current_enemy])
            self.state = "enemy_turn"
            -- Transition to enemy turn or end combat if enemy is defeated
        end
    end
end

function attack(self, attacker, defender)
    local damage = attacker.attack - defender.defense
    defender.hp = defender.hp - damage
    print(defender.name .. " takes " .. damage .. " damage. Remaining HP: " .. defender.hp)

    -- Check for win/loss conditions
    if defender.hp <= 0 then
        print(defender.name .. " is defeated!"
